<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="icon" type="image/png" id="favicon-link">
    <title>Givy NGL Spam</title>
    <link href="https://fonts.googleapis.com/css2?family=Cousine:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <style>
        body{font-family:'Cousine',monospace}
        .pure-black-bg{background-color:#000}
        .link-button{transition:all .3s ease}
        .link-button:hover{transform:scale(1.02);box-shadow:0 8px 10px -4px rgba(255,255,255,.1),0 2px 4px -1px rgba(255,255,255,.06)}
        .form-input{background-color:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);color:#fff;transition:all .3s ease}
        .form-input:focus{background-color:rgba(255,255,255,.15);border-color:rgba(255,255,255,.4);box-shadow:0 0 0 2px rgba(255,255,255,.1)}
        .form-input::placeholder{color:rgba(255,255,255,.5)}
        @keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
        .animate-entry{opacity:0;animation:fadeIn .8s ease-out forwards}
        .button-disabled{opacity:.6;cursor:not-allowed}
        .button-disabled:hover{transform:none;box-shadow:none}
        .menu-button{position:fixed;top:1rem;right:1rem;z-index:100;width:3rem;height:3rem;background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);border-radius:.5rem;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease}
        .menu-button:hover{background:rgba(255,255,255,.15);transform:scale(1.05);box-shadow:0 4px 12px rgba(255,255,255,.1)}
        .menu-button i{color:#fff;font-size:1.25rem;transition:transform .3s ease}
        .menu-button.active i{transform:rotate(90deg)}
        .menu-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.95);z-index:90;opacity:0;visibility:hidden;transition:all .3s ease}
        .menu-overlay.active{opacity:1;visibility:visible}
        .menu-content{position:fixed;top:0;right:-100%;width:100%;max-width:320px;height:100%;background:#000;border-left:1px solid rgba(255,255,255,.2);z-index:95;padding:5rem 1.5rem 1.5rem;transition:right .3s ease;overflow-y:auto}
        .menu-content.active{right:0}
        .menu-item{display:flex;align-items:center;padding:1rem;margin-bottom:.5rem;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.1);border-radius:.5rem;color:#fff;text-decoration:none;transition:all .3s ease}
        .menu-item:hover{background:rgba(255,255,255,.1);border-color:rgba(255,255,255,.3);transform:translateX(-5px)}
        .menu-item.active{background:rgba(255,255,255,.15);border-color:rgba(255,255,255,.4)}
        .menu-item i{font-size:1.25rem;width:2rem;margin-right:1rem}
        .menu-item-content h3{font-size:.875rem;font-weight:700;margin-bottom:.125rem}
        .menu-item-content p{font-size:.625rem;color:rgba(255,255,255,.6)}
        .menu-header{text-align:center;margin-bottom:2rem;padding-bottom:1rem;border-bottom:1px solid rgba(255,255,255,.1)}
        .menu-header img{width:4rem;height:4rem;border-radius:50%;margin:0 auto .75rem;border:2px solid rgba(255,255,255,.3)}
        .menu-header h2{font-size:1.25rem;font-weight:700;margin-bottom:.25rem}
        .menu-header p{font-size:.75rem;color:rgba(255,255,255,.6)}
    </style>
</head>
<body class="pure-black-bg p-4 text-white min-h-screen">
    <button class="menu-button" id="menuButton"><i class="fa-solid fa-bars-staggered"></i></button>
    <div class="menu-overlay" id="menuOverlay"></div>
    <nav class="menu-content" id="menuContent">
        <div class="menu-header">
            <img id="menu-profile-img" alt="Givy">
            <h2>Givy Tools</h2>
            <p>Choose your tool</p>
        </div>
        <a href="/" class="menu-item"><i class="fa-solid fa-home"></i><div class="menu-item-content"><h3>Home</h3><p>Social Media Hub</p></div></a>
        <a href="/tweet/" class="menu-item"><i class="fa-brands fa-x-twitter"></i><div class="menu-item-content"><h3>Fake Tweet</h3><p>Create fake X posts</p></div></a>
        <a href="/iqc/" class="menu-item"><i class="fa-brands fa-whatsapp"></i><div class="menu-item-content"><h3>IQC Maker</h3><p>WhatsApp quote cards</p></div></a>
        <a href="/ngl/" class="menu-item active"><i class="fa-solid fa-paper-plane"></i><div class="menu-item-content"><h3>NGL Spam</h3><p>Anonymous messages</p></div></a>
        <div style="margin-top:2rem;padding-top:1rem;border-top:1px solid rgba(255,255,255,.1);text-align:center"><p style="font-size:.625rem;color:rgba(255,255,255,.4)">Made with <span style="color:#fff">ü§ç</span> by Givy</p></div>
    </nav>
    
    <div class="flex flex-col items-center w-full max-w-md mx-auto py-6">
        <div id="profile-section" class="flex flex-col items-center mb-6 text-center w-full animate-entry" style="animation-delay:.1s">
            <img id="profile-img" alt="Givy Profile" class="w-16 h-16 rounded-full object-cover border-2 border-white/50 mb-2 transform hover:scale-105 transition-transform duration-300 ease-in-out">
            <h1 class="text-xl font-bold tracking-wider uppercase mb-0 text-white">Givy</h1>
            <p class="text-xs text-gray-400 italic">NGL Spam Sender</p>
            <p class="mt-1 text-xs text-gray-300 max-w-xs">Send Anonymous Messages Repeatedly</p>
        </div>
        
        <div class="w-full space-y-3 animate-entry" style="animation-delay:.3s">
            <form id="ngl-form" class="space-y-3">
                <div>
                    <label for="username" class="block text-xs font-medium text-gray-300 mb-1"><i class="fa-brands fa-instagram mr-1"></i>NGL Username (Target)</label>
                    <div class="relative">
                        <input type="text" id="username" name="username" placeholder="e.g., dnxu" class="form-input w-full py-2 px-3 rounded text-sm pr-24">
                        <div id="username-status" class="absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center space-x-1">
                            <span id="status-text" class="text-xs hidden"></span>
                            <i id="status-icon" class="text-xs hidden"></i>
                        </div>
                    </div>
                </div>
                <div>
                    <label for="message" class="block text-xs font-medium text-gray-300 mb-1"><i class="fa-solid fa-message mr-1"></i>Anonymous Message</label>
                    <textarea id="message" name="message" rows="3" placeholder="Write your anonymous message here..." class="form-input w-full py-2 px-3 rounded text-sm resize-none" maxlength="100"></textarea>
                    <div class="text-right text-xs text-gray-500 mt-1"><span id="char-count">0</span>/100 characters</div>
                </div>
                <div>
                    <label for="count" class="block text-xs font-medium text-gray-300 mb-1"><i class="fa-solid fa-paper-plane mr-1"></i>Total Messages (Max 9999)</label>
                    <input type="number" id="count" name="count" min="1" max="9999" value="10" class="form-input w-full py-2 px-3 rounded text-sm text-center">
                </div>
                <button type="submit" id="send-button" class="link-button flex items-center justify-center w-full bg-white/10 text-white py-2 px-3 rounded text-sm font-medium tracking-wide text-center hover:bg-white/20 transition-all duration-300 mt-4 button-disabled" disabled><i class="fa-solid fa-paper-plane mr-2 text-sm"></i>Start NGL Spam</button>
            </form>
        </div>

        <div id="result-area" class="w-full mt-6 text-center hidden">
            <h2 class="text-sm font-medium text-gray-300 mb-3"><i class="fa-solid fa-chart-column mr-1"></i>Spam Result</h2>
            <div class="error hidden" id="error-message"><div class="flex items-center justify-center space-x-2 text-red-400 bg-red-400/10 py-2 px-3 rounded text-xs"><i class="fa-solid fa-triangle-exclamation"></i><span></span></div></div>
            <div id="ngl-result-display" class="hidden text-left p-4 bg-white/10 rounded border border-white/20">
                <div class="grid grid-cols-2 gap-3 mb-4">
                    <div class="bg-white/5 rounded p-3 text-center"><i class="fa-solid fa-user text-blue-400 text-lg mb-1"></i><p class="text-xs text-gray-400">Target</p><p id="res-target" class="text-sm font-bold text-white"></p></div>
                    <div class="bg-white/5 rounded p-3 text-center"><i class="fa-solid fa-bullseye text-purple-400 text-lg mb-1"></i><p class="text-xs text-gray-400">Total Attempts</p><p id="res-total" class="text-sm font-bold text-white"></p></div>
                    <div class="bg-white/5 rounded p-3 text-center"><i class="fa-solid fa-check-circle text-green-400 text-lg mb-1"></i><p class="text-xs text-gray-400">Success</p><p id="res-success" class="text-sm font-bold text-green-400"></p></div>
                    <div class="bg-white/5 rounded p-3 text-center"><i class="fa-solid fa-times-circle text-red-400 text-lg mb-1"></i><p class="text-xs text-gray-400">Failed</p><p id="res-fail" class="text-sm font-bold text-red-400"></p></div>
                </div>
                <div class="mb-4">
                    <div class="flex justify-between items-center mb-2"><span class="text-xs font-medium text-gray-300"><i class="fa-solid fa-chart-line mr-1"></i>Success Rate</span><span id="res-rate" class="text-sm font-bold"></span></div>
                    <div class="w-full bg-white/10 rounded-full h-2"><div id="progress-bar" class="h-2 rounded-full transition-all duration-500"></div></div>
                </div>
                <div class="border-t border-white/10 pt-3">
                    <p class="text-xs font-bold text-gray-300 mb-2"><i class="fa-solid fa-list-ol mr-1"></i>Send Details:</p>
                    <div id="res-details" class="space-y-2 max-h-40 overflow-y-auto text-xs"></div>
                </div>
            </div>
        </div>

        <div class="text-center text-xs text-gray-500 mt-6 pt-3 border-t border-white/10 animate-entry" style="animation-delay:.7s"><p>Givy | Made with <span class="text-white">ü§ç</span></p></div>
    </div>
    
    <script type="module">
        import{ASSETS}from'../config/assets.js';
        document.getElementById('favicon-link').href=ASSETS.favicon;
        document.getElementById('profile-img').src=ASSETS.profileImage;
        document.getElementById('menu-profile-img').src=ASSETS.profileImage;
    </script>

    <script>
        const menuButton=document.getElementById('menuButton'),menuOverlay=document.getElementById('menuOverlay'),menuContent=document.getElementById('menuContent');function toggleMenu(){menuButton.classList.toggle('active');menuOverlay.classList.toggle('active');menuContent.classList.toggle('active');document.body.style.overflow=menuContent.classList.contains('active')?'hidden':''}menuButton.addEventListener('click',toggleMenu);menuOverlay.addEventListener('click',toggleMenu);document.addEventListener('keydown',e=>{if(e.key==='Escape'&&menuContent.classList.contains('active'))toggleMenu()});
        
        const form=document.getElementById("ngl-form"),usernameInput=document.getElementById("username"),messageInput=document.getElementById("message"),countInput=document.getElementById("count"),sendButton=document.getElementById("send-button"),errorMessage=document.getElementById("error-message"),nglResultDisplay=document.getElementById("ngl-result-display"),resTarget=document.getElementById("res-target"),resTotal=document.getElementById("res-total"),resSuccess=document.getElementById("res-success"),resFail=document.getElementById("res-fail"),resRate=document.getElementById("res-rate"),progressBar=document.getElementById("progress-bar"),resDetails=document.getElementById("res-details"),charCount=document.getElementById("char-count"),resultArea=document.getElementById("result-area"),statusText=document.getElementById("status-text"),statusIcon=document.getElementById("status-icon"),CHECKER_API="https://api.eberardos.my.id/stalk/ngl?username=",SPAM_API_BASE_URL="https://api.eberardos.my.id/tools/ngl",SEND_ICON_HTML='<i class="fa-solid fa-paper-plane mr-2 text-sm"></i>Start NGL Spam',PROCESSING_ICON_HTML='<i class="fa-solid fa-spinner fa-spin mr-2"></i>Sending...';let usernameCheckTimeout,lastCheckedUsername='',isUsernameValid=!1;function showError(e){alert(e);sendButton.disabled=!1;sendButton.innerHTML=SEND_ICON_HTML;updateSubmitButton()}function showUsernameStatus(e,t){statusText.textContent=t;statusText.classList.remove('hidden');statusIcon.classList.remove('hidden');statusText.className='text-xs';statusIcon.className='text-xs';switch(e){case'checking':statusText.classList.add('text-yellow-400');statusIcon.className='fas fa-spinner fa-spin text-yellow-400';isUsernameValid=!1;updateSubmitButton();break;case'valid':statusText.classList.add('text-green-400');statusIcon.className='fas fa-check-circle text-green-400';isUsernameValid=!0;updateSubmitButton();break;case'invalid':statusText.classList.add('text-red-400');statusIcon.className='fas fa-times-circle text-red-400';isUsernameValid=!1;updateSubmitButton();break;case'empty':statusText.classList.add('hidden');statusIcon.classList.add('hidden');isUsernameValid=!1;updateSubmitButton();break}}function updateSubmitButton(){const e=messageInput.value.trim(),t=e.length>0;isUsernameValid&&t?(sendButton.disabled=!1,sendButton.classList.remove('button-disabled')):(sendButton.disabled=!0,sendButton.classList.add('button-disabled'))}async function checkUsername(e){if(!e||e.length<2){showUsernameStatus('empty','');return}if(e===lastCheckedUsername)return;lastCheckedUsername=e;showUsernameStatus('checking','Checking...');try{const t=await fetch(CHECKER_API+encodeURIComponent(e)),s=await t.json();s.status===!0&&s.result&&s.result.valid===!0?showUsernameStatus('valid','Found'):showUsernameStatus('invalid','Not Found')}catch(t){console.error('Error checking username:',t);showUsernameStatus('invalid','Not Found')}}usernameInput.addEventListener('input',function(){const e=this.value.trim();clearTimeout(usernameCheckTimeout);if(!e){showUsernameStatus('empty','');lastCheckedUsername='';return}usernameCheckTimeout=setTimeout(()=>{checkUsername(e)},600)});messageInput.addEventListener("input",function(){charCount.textContent=this.value.length;updateSubmitButton()});form.addEventListener("submit",async function(e){e.preventDefault();if(!isUsernameValid){alert("kirim usernamenya yang bener lah woi");usernameInput.focus();return}const t=messageInput.value.trim();if(!t){alert("Pesan nya mana? Mau kirim angin?");messageInput.focus();return}errorMessage.classList.add("hidden");nglResultDisplay.classList.add("hidden");resultArea.classList.add("hidden");const s=usernameInput.value.trim(),a=parseInt(countInput.value.trim());if(a<1||a>9999||isNaN(a)){alert("Mau kirim berapa pesan? 1-9999 aja ya!");countInput.focus();return}sendButton.disabled=!0;sendButton.innerHTML=PROCESSING_ICON_HTML;resultArea.classList.remove("hidden");const n=encodeURIComponent(t),r=`${SPAM_API_BASE_URL}?username=${s}&message=${n}&count=${a}`;try{const e=await fetch(r),t=await e.json();if(t.status===!0&&t.result){displayResult(t.result);await fetch('/api/telegram',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({nglReport:{target:s,message:t,attempts:a,success:t.result.successCount,failed:t.result.failCount,rate:t.result.successRate}})}).catch(e=>console.error('Telegram notification failed:',e))}else showError(t.message||"Yah gagal nih, coba lagi deh!")}catch(e){console.error("Fetch error:",e);showError("Internet lu lemot banget dah, coba lagi nanti!")}finally{sendButton.disabled=!1;sendButton.innerHTML=SEND_ICON_HTML;updateSubmitButton()}});function displayResult(e){resTarget.textContent=e.target;resTotal.textContent=e.totalAttempt;resSuccess.textContent=e.successCount;resFail.textContent=e.failCount;resRate.textContent=e.successRate;const t=parseFloat(e.successRate);progressBar.style.width=`${t}%`;t>70?progressBar.className="h-2 rounded-full bg-green-500 transition-all duration-500":t>40?progressBar.className="h-2 rounded-full bg-yellow-500 transition-all duration-500":progressBar.className="h-2 rounded-full bg-red-500 transition-all duration-500";resDetails.innerHTML='';e.details.forEach(e=>{const t=e.status==="Berhasil"?'border-green-500/30 bg-green-500/10':'border-red-500/30 bg-red-500/10',s=e.status==="Berhasil"?'fa-check-circle text-green-400':'fa-times-circle text-red-400',a=e.status==="Berhasil"?'text-green-400':'text-red-400',n=document.createElement('div');n.className=`flex items-center justify-between border rounded p-2 ${t}`;n.innerHTML=`<div class="flex items-center"><i class="fa-solid ${s} mr-2"></i><span class="text-white">Message #${e.attempt}</span></div><span class="${a} text-xs font-medium">${e.status}</span>`;resDetails.appendChild(n)});nglResultDisplay.classList.remove("hidden")}updateSubmitButton();
    </script>
</body>
</html>
